{"ast":null,"code":"import React,{useState}from\"react\";import{useSelector}from\"react-redux\";import{useParams,useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const apiUrl=\"https://techbuggy-1.onrender.com\";const DestinationDetails=()=>{const{id}=useParams();const navigate=useNavigate();const destinations=useSelector(state=>state.destinations);const destination=destinations.find(d=>d.id===parseInt(id));const[date,setDate]=useState(\"\");const[persons,setPersons]=useState(1);const[confirmed,setConfirmed]=useState(false);const[error,setError]=useState(\"\");const handleBooking=async()=>{const token=localStorage.getItem(\"token\");if(!token){navigate(\"/login\");// redirect if not logged in\nreturn;}try{const res=await fetch(\"\".concat(apiUrl,\"/api/bookings/book\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)// send token\n},body:JSON.stringify({destinationId:destination.id,destinationName:destination.name,date,persons,price:destination.price*persons})});const data=await res.json();if(!res.ok){setError(data.message||\"Booking failed\");return;}setConfirmed(true);}catch(err){setError(\"Something went wrong, try again!\");}};if(!destination)return/*#__PURE__*/_jsx(\"h2\",{className:\"pt-24 text-center\",children:\"Destination not found\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"pt-24 px-6 md:px-12 lg:px-20 flex flex-col md:flex-row gap-10\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"img\",{src:destination.image,alt:destination.name,className:\"w-full h-80 object-cover rounded-xl shadow-lg\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold mt-4\",children:destination.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:destination.location}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg mt-3\",children:destination.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex items-center gap-6\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-yellow-500 font-semibold text-lg\",children:[\"\\u2B50 \",destination.rating,\" / 5\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-orange-600 font-bold text-xl\",children:[\"\\u20B9\",destination.price,\" / person\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 bg-white rounded-xl shadow-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-semibold mb-4\",children:\"Book Your Trip\"}),confirmed?/*#__PURE__*/_jsx(\"p\",{className:\"text-green-600 font-bold text-xl\",children:\"\\uD83C\\uDF89 Order Confirmed!\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[error&&/*#__PURE__*/_jsx(\"p\",{className:\"bg-red-100 text-red-700 p-2 rounded mb-4\",children:error}),/*#__PURE__*/_jsx(\"label\",{className:\"block mb-2 font-medium\",children:\"Select Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:date,onChange:e=>setDate(e.target.value),className:\"border rounded-lg px-3 py-2 w-full mb-4\"}),/*#__PURE__*/_jsx(\"label\",{className:\"block mb-2 font-medium\",children:\"Number of Persons\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:persons,onChange:e=>setPersons(Number(e.target.value)),className:\"border rounded-lg px-3 py-2 w-full mb-4\",min:\"1\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg font-semibold mb-4\",children:[\"Total Price:\",\" \",/*#__PURE__*/_jsxs(\"span\",{className:\"text-orange-600\",children:[\"\\u20B9\",destination.price*persons]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleBooking,className:\"w-full bg-orange-500 hover:bg-orange-600 text-white py-2 rounded-lg font-semibold transition\",children:\"Book Now\"})]})]})]});};export default DestinationDetails;","map":{"version":3,"names":["React","useState","useSelector","useParams","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","apiUrl","DestinationDetails","id","navigate","destinations","state","destination","find","d","parseInt","date","setDate","persons","setPersons","confirmed","setConfirmed","error","setError","handleBooking","token","localStorage","getItem","res","fetch","concat","method","headers","Authorization","body","JSON","stringify","destinationId","destinationName","name","price","data","json","ok","message","err","className","children","src","image","alt","location","description","rating","type","value","onChange","e","target","Number","min","onClick"],"sources":["C:/Users/CH.LAKSHMI JAHNAVI/Desktop/Techbuggy/frontend/src/components/destinationpage.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nconst apiUrl = \"https://techbuggy-1.onrender.com\";\r\n\r\nconst DestinationDetails = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const destinations = useSelector((state) => state.destinations);\r\n  const destination = destinations.find((d) => d.id === parseInt(id));\r\n\r\n  const [date, setDate] = useState(\"\");\r\n  const [persons, setPersons] = useState(1);\r\n  const [confirmed, setConfirmed] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const handleBooking = async () => {\r\n    const token = localStorage.getItem(\"token\");\r\n\r\n    if (!token) {\r\n      navigate(\"/login\"); // redirect if not logged in\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(`${apiUrl}/api/bookings/book`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`, // send token\r\n        },\r\n        body: JSON.stringify({\r\n          destinationId: destination.id,\r\n          destinationName: destination.name,\r\n          date,\r\n          persons,\r\n          price: destination.price * persons,\r\n        }),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (!res.ok) {\r\n        setError(data.message || \"Booking failed\");\r\n        return;\r\n      }\r\n\r\n      setConfirmed(true);\r\n    } catch (err) {\r\n      setError(\"Something went wrong, try again!\");\r\n    }\r\n  };\r\n\r\n  if (!destination)\r\n    return <h2 className=\"pt-24 text-center\">Destination not found</h2>;\r\n\r\n  return (\r\n    <div className=\"pt-24 px-6 md:px-12 lg:px-20 flex flex-col md:flex-row gap-10\">\r\n      {/* Image + Details */}\r\n      <div className=\"flex-1\">\r\n        <img\r\n          src={destination.image}\r\n          alt={destination.name}\r\n          className=\"w-full h-80 object-cover rounded-xl shadow-lg\"\r\n        />\r\n        <h2 className=\"text-3xl font-bold mt-4\">{destination.name}</h2>\r\n        <p className=\"text-gray-500\">{destination.location}</p>\r\n        <p className=\"text-lg mt-3\">{destination.description}</p>\r\n\r\n        {/* Rating & Price */}\r\n        <div className=\"mt-4 flex items-center gap-6\">\r\n          <p className=\"text-yellow-500 font-semibold text-lg\">\r\n            ‚≠ê {destination.rating} / 5\r\n          </p>\r\n          <p className=\"text-orange-600 font-bold text-xl\">\r\n            ‚Çπ{destination.price} / person\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Booking Form */}\r\n      <div className=\"flex-1 bg-white rounded-xl shadow-lg p-6\">\r\n        <h3 className=\"text-2xl font-semibold mb-4\">Book Your Trip</h3>\r\n\r\n        {confirmed ? (\r\n          <p className=\"text-green-600 font-bold text-xl\">\r\n            üéâ Order Confirmed!\r\n          </p>\r\n        ) : (\r\n          <>\r\n            {error && (\r\n              <p className=\"bg-red-100 text-red-700 p-2 rounded mb-4\">{error}</p>\r\n            )}\r\n\r\n            <label className=\"block mb-2 font-medium\">Select Date</label>\r\n            <input\r\n              type=\"date\"\r\n              value={date}\r\n              onChange={(e) => setDate(e.target.value)}\r\n              className=\"border rounded-lg px-3 py-2 w-full mb-4\"\r\n            />\r\n\r\n            <label className=\"block mb-2 font-medium\">Number of Persons</label>\r\n            <input\r\n              type=\"number\"\r\n              value={persons}\r\n              onChange={(e) => setPersons(Number(e.target.value))}\r\n              className=\"border rounded-lg px-3 py-2 w-full mb-4\"\r\n              min=\"1\"\r\n            />\r\n\r\n            {/* Show total price */}\r\n            <p className=\"text-lg font-semibold mb-4\">\r\n              Total Price:{\" \"}\r\n              <span className=\"text-orange-600\">\r\n                ‚Çπ{destination.price * persons}\r\n              </span>\r\n            </p>\r\n\r\n            <button\r\n              onClick={handleBooking}\r\n              className=\"w-full bg-orange-500 hover:bg-orange-600 text-white py-2 rounded-lg font-semibold transition\"\r\n            >\r\n              Book Now\r\n            </button>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DestinationDetails;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAC1D,KAAM,CAAAC,MAAM,CAAG,kCAAkC,CAEjD,KAAM,CAAAC,kBAAkB,CAAGA,CAAA,GAAM,CAC/B,KAAM,CAAEC,EAAG,CAAC,CAAGV,SAAS,CAAC,CAAC,CAC1B,KAAM,CAAAW,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAW,YAAY,CAAGb,WAAW,CAAEc,KAAK,EAAKA,KAAK,CAACD,YAAY,CAAC,CAC/D,KAAM,CAAAE,WAAW,CAAGF,YAAY,CAACG,IAAI,CAAEC,CAAC,EAAKA,CAAC,CAACN,EAAE,GAAKO,QAAQ,CAACP,EAAE,CAAC,CAAC,CAEnE,KAAM,CAACQ,IAAI,CAAEC,OAAO,CAAC,CAAGrB,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACsB,OAAO,CAAEC,UAAU,CAAC,CAAGvB,QAAQ,CAAC,CAAC,CAAC,CACzC,KAAM,CAACwB,SAAS,CAAEC,YAAY,CAAC,CAAGzB,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAAC0B,KAAK,CAAEC,QAAQ,CAAC,CAAG3B,QAAQ,CAAC,EAAE,CAAC,CAEtC,KAAM,CAAA4B,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3C,GAAI,CAACF,KAAK,CAAE,CACVhB,QAAQ,CAAC,QAAQ,CAAC,CAAE;AACpB,OACF,CAEA,GAAI,CACF,KAAM,CAAAmB,GAAG,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIxB,MAAM,uBAAsB,CACrDyB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,aAAa,WAAAH,MAAA,CAAYL,KAAK,CAAI;AACpC,CAAC,CACDS,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBC,aAAa,CAAEzB,WAAW,CAACJ,EAAE,CAC7B8B,eAAe,CAAE1B,WAAW,CAAC2B,IAAI,CACjCvB,IAAI,CACJE,OAAO,CACPsB,KAAK,CAAE5B,WAAW,CAAC4B,KAAK,CAAGtB,OAC7B,CAAC,CACH,CAAC,CAAC,CAEF,KAAM,CAAAuB,IAAI,CAAG,KAAM,CAAAb,GAAG,CAACc,IAAI,CAAC,CAAC,CAE7B,GAAI,CAACd,GAAG,CAACe,EAAE,CAAE,CACXpB,QAAQ,CAACkB,IAAI,CAACG,OAAO,EAAI,gBAAgB,CAAC,CAC1C,OACF,CAEAvB,YAAY,CAAC,IAAI,CAAC,CACpB,CAAE,MAAOwB,GAAG,CAAE,CACZtB,QAAQ,CAAC,kCAAkC,CAAC,CAC9C,CACF,CAAC,CAED,GAAI,CAACX,WAAW,CACd,mBAAOX,IAAA,OAAI6C,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAC,uBAAqB,CAAI,CAAC,CAErE,mBACE5C,KAAA,QAAK2C,SAAS,CAAC,+DAA+D,CAAAC,QAAA,eAE5E5C,KAAA,QAAK2C,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACrB9C,IAAA,QACE+C,GAAG,CAAEpC,WAAW,CAACqC,KAAM,CACvBC,GAAG,CAAEtC,WAAW,CAAC2B,IAAK,CACtBO,SAAS,CAAC,+CAA+C,CAC1D,CAAC,cACF7C,IAAA,OAAI6C,SAAS,CAAC,yBAAyB,CAAAC,QAAA,CAAEnC,WAAW,CAAC2B,IAAI,CAAK,CAAC,cAC/DtC,IAAA,MAAG6C,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEnC,WAAW,CAACuC,QAAQ,CAAI,CAAC,cACvDlD,IAAA,MAAG6C,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAEnC,WAAW,CAACwC,WAAW,CAAI,CAAC,cAGzDjD,KAAA,QAAK2C,SAAS,CAAC,8BAA8B,CAAAC,QAAA,eAC3C5C,KAAA,MAAG2C,SAAS,CAAC,uCAAuC,CAAAC,QAAA,EAAC,SACjD,CAACnC,WAAW,CAACyC,MAAM,CAAC,MACxB,EAAG,CAAC,cACJlD,KAAA,MAAG2C,SAAS,CAAC,mCAAmC,CAAAC,QAAA,EAAC,QAC9C,CAACnC,WAAW,CAAC4B,KAAK,CAAC,WACtB,EAAG,CAAC,EACD,CAAC,EACH,CAAC,cAGNrC,KAAA,QAAK2C,SAAS,CAAC,0CAA0C,CAAAC,QAAA,eACvD9C,IAAA,OAAI6C,SAAS,CAAC,6BAA6B,CAAAC,QAAA,CAAC,gBAAc,CAAI,CAAC,CAE9D3B,SAAS,cACRnB,IAAA,MAAG6C,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,+BAEhD,CAAG,CAAC,cAEJ5C,KAAA,CAAAE,SAAA,EAAA0C,QAAA,EACGzB,KAAK,eACJrB,IAAA,MAAG6C,SAAS,CAAC,0CAA0C,CAAAC,QAAA,CAAEzB,KAAK,CAAI,CACnE,cAEDrB,IAAA,UAAO6C,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CAAC,aAAW,CAAO,CAAC,cAC7D9C,IAAA,UACEqD,IAAI,CAAC,MAAM,CACXC,KAAK,CAAEvC,IAAK,CACZwC,QAAQ,CAAGC,CAAC,EAAKxC,OAAO,CAACwC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CACzCT,SAAS,CAAC,yCAAyC,CACpD,CAAC,cAEF7C,IAAA,UAAO6C,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CAAC,mBAAiB,CAAO,CAAC,cACnE9C,IAAA,UACEqD,IAAI,CAAC,QAAQ,CACbC,KAAK,CAAErC,OAAQ,CACfsC,QAAQ,CAAGC,CAAC,EAAKtC,UAAU,CAACwC,MAAM,CAACF,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,CAAE,CACpDT,SAAS,CAAC,yCAAyC,CACnDc,GAAG,CAAC,GAAG,CACR,CAAC,cAGFzD,KAAA,MAAG2C,SAAS,CAAC,4BAA4B,CAAAC,QAAA,EAAC,cAC5B,CAAC,GAAG,cAChB5C,KAAA,SAAM2C,SAAS,CAAC,iBAAiB,CAAAC,QAAA,EAAC,QAC/B,CAACnC,WAAW,CAAC4B,KAAK,CAAGtB,OAAO,EACzB,CAAC,EACN,CAAC,cAEJjB,IAAA,WACE4D,OAAO,CAAErC,aAAc,CACvBsB,SAAS,CAAC,8FAA8F,CAAAC,QAAA,CACzG,UAED,CAAQ,CAAC,EACT,CACH,EACE,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAxC,kBAAkB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}